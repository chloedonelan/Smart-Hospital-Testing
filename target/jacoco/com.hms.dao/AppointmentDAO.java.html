<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AppointmentDAO.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Doctor-Patient-Portal Maven Webapp</a> &gt; <a href="index.source.html" class="el_package">com.hms.dao</a> &gt; <span class="el_source">AppointmentDAO.java</span></div><h1>AppointmentDAO.java</h1><pre class="source lang-java linenums">package com.hms.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import com.hms.entity.Appointment;

public class AppointmentDAO {

	private Connection conn;

	public AppointmentDAO(Connection conn) {
<span class="nc" id="L16">		super();</span>
<span class="nc" id="L17">		this.conn = conn;</span>
<span class="nc" id="L18">	}</span>

	//for create appointment
	public boolean addAppointment(Appointment appointment) {

<span class="nc" id="L23">		boolean f = false;</span>

		try {

<span class="nc" id="L27">			String sql = &quot;insert into appointment(userId, fullName, gender, age, appointmentDate, email, phone, diseases, doctorId, address, status) values(?,?,?,?,?,?,?,?,?,?,?)&quot;;</span>
<span class="nc" id="L28">			PreparedStatement pstmt = this.conn.prepareStatement(sql);</span>

<span class="nc" id="L30">			pstmt.setInt(1, appointment.getUserId());</span>
<span class="nc" id="L31">			pstmt.setString(2, appointment.getFullName());</span>
<span class="nc" id="L32">			pstmt.setString(3, appointment.getGender());</span>
<span class="nc" id="L33">			pstmt.setString(4, appointment.getAge());</span>
<span class="nc" id="L34">			pstmt.setString(5, appointment.getAppointmentDate());</span>
<span class="nc" id="L35">			pstmt.setString(6, appointment.getEmail());</span>
<span class="nc" id="L36">			pstmt.setString(7, appointment.getPhone());</span>
<span class="nc" id="L37">			pstmt.setString(8, appointment.getDiseases());</span>
<span class="nc" id="L38">			pstmt.setInt(9, appointment.getDoctorId());</span>
<span class="nc" id="L39">			pstmt.setString(10, appointment.getAddress());</span>
<span class="nc" id="L40">			pstmt.setString(11, appointment.getStatus());</span>

<span class="nc" id="L42">			pstmt.executeUpdate();</span>

<span class="nc" id="L44">			f = true;</span>

<span class="nc" id="L46">		} catch (Exception e) {</span>
<span class="nc" id="L47">			e.printStackTrace();</span>
<span class="nc" id="L48">		}</span>

<span class="nc" id="L50">		return f;</span>
	}

	// get list of appointment for logged in specific user 
	//show appointment list for specific user panel
	public List&lt;Appointment&gt; getAllAppointmentByLoginUser(int userId) {
<span class="nc" id="L56">		List&lt;Appointment&gt; appList = new ArrayList&lt;Appointment&gt;();</span>

<span class="nc" id="L58">		Appointment appointment = null;</span>

		try {

<span class="nc" id="L62">			String sql = &quot;select * from appointment where userId=?&quot;;</span>
<span class="nc" id="L63">			PreparedStatement pstmt = this.conn.prepareStatement(sql);</span>

<span class="nc" id="L65">			pstmt.setInt(1, userId);</span>

<span class="nc" id="L67">			ResultSet resultSet = pstmt.executeQuery();</span>

<span class="nc bnc" id="L69" title="All 2 branches missed.">			while (resultSet.next()) {</span>

<span class="nc" id="L71">				appointment = new Appointment();</span>

<span class="nc" id="L73">				appointment.setId(resultSet.getInt(1));// appoint id</span>
<span class="nc" id="L74">				appointment.setUserId(resultSet.getInt(2));// userId</span>
<span class="nc" id="L75">				appointment.setFullName(resultSet.getString(3));</span>
<span class="nc" id="L76">				appointment.setGender(resultSet.getString(4));</span>
<span class="nc" id="L77">				appointment.setAge(resultSet.getString(5));</span>
<span class="nc" id="L78">				appointment.setAppointmentDate(resultSet.getString(6));</span>
<span class="nc" id="L79">				appointment.setEmail(resultSet.getString(7));</span>
<span class="nc" id="L80">				appointment.setPhone(resultSet.getString(8));</span>
<span class="nc" id="L81">				appointment.setDiseases(resultSet.getString(9));</span>
<span class="nc" id="L82">				appointment.setDoctorId(resultSet.getInt(10));</span>
<span class="nc" id="L83">				appointment.setAddress(resultSet.getString(11));</span>
<span class="nc" id="L84">				appointment.setStatus(resultSet.getString(12));</span>
<span class="nc" id="L85">				appList.add(appointment);</span>

			}

<span class="nc" id="L89">		} catch (Exception e) {</span>
<span class="nc" id="L90">			e.printStackTrace();</span>
<span class="nc" id="L91">		}</span>

<span class="nc" id="L93">		return appList;</span>

	}

	// get appointment list of patient for specific doctor
	//show list of appointment in specific doctor panel 
	public List&lt;Appointment&gt; getAllAppointmentByLoginDoctor(int doctorId) {
<span class="nc" id="L100">		List&lt;Appointment&gt; appList = new ArrayList&lt;Appointment&gt;();</span>

<span class="nc" id="L102">		Appointment appointment = null;</span>

		try {

<span class="nc" id="L106">			String sql = &quot;select * from appointment where doctorId=?&quot;;</span>
<span class="nc" id="L107">			PreparedStatement pstmt = this.conn.prepareStatement(sql);</span>

<span class="nc" id="L109">			pstmt.setInt(1, doctorId);</span>

<span class="nc" id="L111">			ResultSet resultSet = pstmt.executeQuery();</span>

<span class="nc bnc" id="L113" title="All 2 branches missed.">			while (resultSet.next()) {</span>

<span class="nc" id="L115">				appointment = new Appointment();</span>

<span class="nc" id="L117">				appointment.setId(resultSet.getInt(1));// appoint id</span>
<span class="nc" id="L118">				appointment.setUserId(resultSet.getInt(2));// userId</span>
<span class="nc" id="L119">				appointment.setFullName(resultSet.getString(3));</span>
<span class="nc" id="L120">				appointment.setGender(resultSet.getString(4));</span>
<span class="nc" id="L121">				appointment.setAge(resultSet.getString(5));</span>
<span class="nc" id="L122">				appointment.setAppointmentDate(resultSet.getString(6));</span>
<span class="nc" id="L123">				appointment.setEmail(resultSet.getString(7));</span>
<span class="nc" id="L124">				appointment.setPhone(resultSet.getString(8));</span>
<span class="nc" id="L125">				appointment.setDiseases(resultSet.getString(9));</span>
<span class="nc" id="L126">				appointment.setDoctorId(resultSet.getInt(10));</span>
<span class="nc" id="L127">				appointment.setAddress(resultSet.getString(11));</span>
<span class="nc" id="L128">				appointment.setStatus(resultSet.getString(12));</span>
<span class="nc" id="L129">				appList.add(appointment);</span>

			}

<span class="nc" id="L133">		} catch (Exception e) {</span>
<span class="nc" id="L134">			e.printStackTrace();</span>
<span class="nc" id="L135">		}</span>

<span class="nc" id="L137">		return appList;</span>

	}

	// for doctor comment need specific appointment id
	public Appointment getAppointmentById(int id) {

<span class="nc" id="L144">		Appointment appointment = null;</span>

		try {

<span class="nc" id="L148">			String sql = &quot;select * from appointment where id=?&quot;;</span>
<span class="nc" id="L149">			PreparedStatement pstmt = this.conn.prepareStatement(sql);</span>

<span class="nc" id="L151">			pstmt.setInt(1, id);</span>

<span class="nc" id="L153">			ResultSet resultSet = pstmt.executeQuery();</span>

<span class="nc bnc" id="L155" title="All 2 branches missed.">			while (resultSet.next()) {</span>

<span class="nc" id="L157">				appointment = new Appointment();</span>

<span class="nc" id="L159">				appointment.setId(resultSet.getInt(1));// appoint id</span>
<span class="nc" id="L160">				appointment.setUserId(resultSet.getInt(2));// userId</span>
<span class="nc" id="L161">				appointment.setFullName(resultSet.getString(3));</span>
<span class="nc" id="L162">				appointment.setGender(resultSet.getString(4));</span>
<span class="nc" id="L163">				appointment.setAge(resultSet.getString(5));</span>
<span class="nc" id="L164">				appointment.setAppointmentDate(resultSet.getString(6));</span>
<span class="nc" id="L165">				appointment.setEmail(resultSet.getString(7));</span>
<span class="nc" id="L166">				appointment.setPhone(resultSet.getString(8));</span>
<span class="nc" id="L167">				appointment.setDiseases(resultSet.getString(9));</span>
<span class="nc" id="L168">				appointment.setDoctorId(resultSet.getInt(10));</span>
<span class="nc" id="L169">				appointment.setAddress(resultSet.getString(11));</span>
<span class="nc" id="L170">				appointment.setStatus(resultSet.getString(12));</span>

			}

<span class="nc" id="L174">		} catch (Exception e) {</span>
<span class="nc" id="L175">			e.printStackTrace();</span>
<span class="nc" id="L176">		}</span>

<span class="nc" id="L178">		return appointment;</span>

	}

	// for update comment status
	public boolean updateDrAppointmentCommentStatus(int apptId, int docId, String comment) {

<span class="nc" id="L185">		boolean f = false;</span>

		try {

<span class="nc" id="L189">			String sql = &quot;update appointment set status=? where id=? and doctorId=?&quot;;</span>
<span class="nc" id="L190">			PreparedStatement pstmt = this.conn.prepareStatement(sql);</span>
<span class="nc" id="L191">			pstmt.setString(1, comment);</span>
<span class="nc" id="L192">			pstmt.setInt(2, apptId);</span>
<span class="nc" id="L193">			pstmt.setInt(3, docId);</span>

<span class="nc" id="L195">			pstmt.executeUpdate();</span>

<span class="nc" id="L197">			f = true;</span>

<span class="nc" id="L199">		} catch (Exception e) {</span>
<span class="nc" id="L200">			e.printStackTrace();</span>
<span class="nc" id="L201">		}</span>

<span class="nc" id="L203">		return f;</span>
	}

	// get all appointment in admin panel
	public List&lt;Appointment&gt; getAllAppointment() {
<span class="nc" id="L208">		List&lt;Appointment&gt; appList = new ArrayList&lt;Appointment&gt;();</span>
<span class="nc" id="L209">		Appointment appointment = null;</span>

		try {

<span class="nc" id="L213">			String sql = &quot;select * from appointment order by id desc&quot;;</span>
<span class="nc" id="L214">			PreparedStatement pstmt = this.conn.prepareStatement(sql);</span>

<span class="nc" id="L216">			ResultSet resultSet = pstmt.executeQuery();</span>

<span class="nc bnc" id="L218" title="All 2 branches missed.">			while (resultSet.next()) {</span>

<span class="nc" id="L220">				appointment = new Appointment();</span>

<span class="nc" id="L222">				appointment.setId(resultSet.getInt(1));// appoint id</span>
<span class="nc" id="L223">				appointment.setUserId(resultSet.getInt(2));// userId</span>
<span class="nc" id="L224">				appointment.setFullName(resultSet.getString(3));</span>
<span class="nc" id="L225">				appointment.setGender(resultSet.getString(4));</span>
<span class="nc" id="L226">				appointment.setAge(resultSet.getString(5));</span>
<span class="nc" id="L227">				appointment.setAppointmentDate(resultSet.getString(6));</span>
<span class="nc" id="L228">				appointment.setEmail(resultSet.getString(7));</span>
<span class="nc" id="L229">				appointment.setPhone(resultSet.getString(8));</span>
<span class="nc" id="L230">				appointment.setDiseases(resultSet.getString(9));</span>
<span class="nc" id="L231">				appointment.setDoctorId(resultSet.getInt(10));</span>
<span class="nc" id="L232">				appointment.setAddress(resultSet.getString(11));</span>
<span class="nc" id="L233">				appointment.setStatus(resultSet.getString(12));</span>
<span class="nc" id="L234">				appList.add(appointment);</span>

			}

<span class="nc" id="L238">		} catch (Exception e) {</span>
<span class="nc" id="L239">			e.printStackTrace();</span>
<span class="nc" id="L240">		}</span>

<span class="nc" id="L242">		return appList;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>